---
layout: post
title: Django-mysite만들기7 계층형 답글 게시판 기능 추가
category: Django
tags: [django, python, django-orm]
comments: true
---

> django mini project
>
> cafe24신입사원 교육과정 - django 수업 내용 정리
>
> [강사님github](https://github.com/kickscar)



---



[전체 코드 보기](https://github.com/jungeunlee95/python-mysite)



---

# [django-mysite프로젝트] 7 - 계층형 답글 게시판 기능 추가

# django에 게시판 기능 추가

board app 추가 ! `python manage.py startapp board`

settings.py 에 app 추가



## 1(user):N(board) 관계 Model 정의

**board/models.py**

```python
from django.db import models

# Create your models here.
from user.models import User


class Board(models.Model):
    title = models.CharField(max_length=100)
    content = models.CharField(max_length=2000)
    hit = models.IntegerField(default=0)
    regdate = models.DateTimeField(auto_now=True)
    groupno = models.IntegerField(default=0)
    orderno = models.IntegerField(default=0)
    depth = models.IntegerField(default=0)
    user = models.ForeignKey(User, to_field='id', on_delete=models.CASCADE)
    # user모델의 id를 fk로, user가 지워지면 같이 삭제

```

> [user model정의 보기](<https://jungeunlee95.github.io/django/2019/06/20/mysite%EB%A7%8C%EB%93%A4%EA%B8%B0-2-%ED%9A%8C%EC%9B%90%EA%B0%80%EC%9E%85-%EA%B8%B0%EB%8A%A5-%EC%B6%94%EA%B0%80/>)

>계층형 게시판을 위해서, 
>
>groupno, orderno, depth 컬럼을 정의해 주었다.
>
>`groupno` 컬럼 - 첫 게시글과, 그 게시글의 답글들에게 같은 groupno을 주어서 보여주기 위함
>
>`orderno` 컬럼 - 같은 groupno의 게시글들을 최신순으로 위로 올리기 위함
>
>`depth` 컬럼 - 답글들을 한 칸씩 밀려서 보이게 하기 위함 



**admin.py등록**

```python
from board.models import Board
admin.site.register(Board)
```

`python manage.py makemigrations`

`python manage.py migrate`



# ORM

